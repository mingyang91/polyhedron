import{i as et,_ as kr,S as je,a as rr,o as Le,b as Yn,c as $e,d as vr,O as H,r as Hn,e as Jn,f as Gn,g as Xn,h as Zn,A as Vn,j as Qn,k as X,l as Or,C as ti,E as ri,m as Gt,n as ei,R as ni}from"./Experience-24a16945.js";function ii(t){return et(t==null?void 0:t.lift)}function or(t){return function(r){if(ii(r))return r.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function er(t,r,e,n,i){return new oi(t,r,e,n,i)}var oi=function(t){kr(r,t);function r(e,n,i,o,u,a){var s=t.call(this,e)||this;return s.onFinalize=u,s.shouldUnsubscribe=a,s._next=n?function(f){try{n(f)}catch(c){e.error(c)}}:t.prototype._next,s._error=o?function(f){try{o(f)}catch(c){e.error(c)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=i?function(){try{i()}catch(f){e.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,s}return r.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},r}(je),Ne={now:function(){return(Ne.delegate||Date).now()},delegate:void 0},dr=function(t){kr(r,t);function r(e,n,i){e===void 0&&(e=1/0),n===void 0&&(n=1/0),i===void 0&&(i=Ne);var o=t.call(this)||this;return o._bufferSize=e,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,e),o._windowTime=Math.max(1,n),o}return r.prototype.next=function(e){var n=this,i=n.isStopped,o=n._buffer,u=n._infiniteTimeWindow,a=n._timestampProvider,s=n._windowTime;i||(o.push(e),!u&&o.push(a.now()+s)),this._trimBuffer(),t.prototype.next.call(this,e)},r.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(e),i=this,o=i._infiniteTimeWindow,u=i._buffer,a=u.slice(),s=0;s<a.length&&!e.closed;s+=o?1:2)e.next(a[s]);return this._checkFinalizedStatuses(e),n},r.prototype._trimBuffer=function(){var e=this,n=e._bufferSize,i=e._timestampProvider,o=e._buffer,u=e._infiniteTimeWindow,a=(u?1:2)*n;if(n<1/0&&a<o.length&&o.splice(0,o.length-a),!u){for(var s=i.now(),f=0,c=1;c<o.length&&o[c]<=s;c+=2)f=c;f&&o.splice(0,f+1)}},r}(rr),Be=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Pe(t){return et(t==null?void 0:t.then)}function Ue(t){return et(t[Le])}function De(t){return Symbol.asyncIterator&&et(t==null?void 0:t[Symbol.asyncIterator])}function We(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ui(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ce=ui();function xe(t){return et(t==null?void 0:t[Ce])}function Fe(t){return Yn(this,arguments,function(){var e,n,i,o;return $e(this,function(u){switch(u.label){case 0:e=t.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,vr(e.read())];case 3:return n=u.sent(),i=n.value,o=n.done,o?[4,vr(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,vr(i)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Ke(t){return et(t==null?void 0:t.getReader)}function Dt(t){if(t instanceof H)return t;if(t!=null){if(Ue(t))return ai(t);if(Be(t))return si(t);if(Pe(t))return fi(t);if(De(t))return Ye(t);if(xe(t))return ci(t);if(Ke(t))return hi(t)}throw We(t)}function ai(t){return new H(function(r){var e=t[Le]();if(et(e.subscribe))return e.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function si(t){return new H(function(r){for(var e=0;e<t.length&&!r.closed;e++)r.next(t[e]);r.complete()})}function fi(t){return new H(function(r){t.then(function(e){r.closed||(r.next(e),r.complete())},function(e){return r.error(e)}).then(null,Hn)})}function ci(t){return new H(function(r){var e,n;try{for(var i=Jn(t),o=i.next();!o.done;o=i.next()){var u=o.value;if(r.next(u),r.closed)return}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}r.complete()})}function Ye(t){return new H(function(r){_i(t,r).catch(function(e){return r.error(e)})})}function hi(t){return Ye(Fe(t))}function _i(t,r){var e,n,i,o;return Gn(this,void 0,void 0,function(){var u,a;return $e(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),e=Xn(t),s.label=1;case 1:return[4,e.next()];case 2:if(n=s.sent(),!!n.done)return[3,4];if(u=n.value,r.next(u),r.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=s.sent(),i={error:a},[3,11];case 6:return s.trys.push([6,,9,10]),n&&!n.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function it(t,r,e,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=r.schedule(function(){e(),i?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(o),!i)return o}function He(t,r){return r===void 0&&(r=0),or(function(e,n){e.subscribe(er(n,function(i){return it(n,t,function(){return n.next(i)},r)},function(){return it(n,t,function(){return n.complete()},r)},function(i){return it(n,t,function(){return n.error(i)},r)}))})}function Je(t,r){return r===void 0&&(r=0),or(function(e,n){n.add(t.schedule(function(){return e.subscribe(n)},r))})}function pi(t,r){return Dt(t).pipe(Je(r),He(r))}function vi(t,r){return Dt(t).pipe(Je(r),He(r))}function di(t,r){return new H(function(e){var n=0;return r.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}function li(t,r){return new H(function(e){var n;return it(e,r,function(){n=t[Ce](),it(e,r,function(){var i,o,u;try{i=n.next(),o=i.value,u=i.done}catch(a){e.error(a);return}u?e.complete():e.next(o)},0,!0)}),function(){return et(n==null?void 0:n.return)&&n.return()}})}function Ge(t,r){if(!t)throw new Error("Iterable cannot be null");return new H(function(e){it(e,r,function(){var n=t[Symbol.asyncIterator]();it(e,r,function(){n.next().then(function(i){i.done?e.complete():e.next(i.value)})},0,!0)})})}function yi(t,r){return Ge(Fe(t),r)}function gi(t,r){if(t!=null){if(Ue(t))return pi(t,r);if(Be(t))return di(t,r);if(Pe(t))return vi(t,r);if(De(t))return Ge(t,r);if(xe(t))return li(t,r);if(Ke(t))return yi(t,r)}throw We(t)}function mi(t,r){return r?gi(t,r):Dt(t)}function Si(t,r){return or(function(e,n){var i=0;e.subscribe(er(n,function(o){n.next(t.call(r,o,i++))}))})}function wi(t,r,e,n,i,o,u,a){var s=[],f=0,c=0,h=!1,_=function(){h&&!s.length&&!f&&r.complete()},p=function(d){return f<n?v(d):s.push(d)},v=function(d){o&&r.next(d),f++;var b=!1;Dt(e(d,c++)).subscribe(er(r,function(M){i==null||i(M),o?p(M):r.next(M)},function(){b=!0},void 0,function(){if(b)try{f--;for(var M=function(){var D=s.shift();u?it(r,u,function(){return v(D)}):v(D)};s.length&&f<n;)M();_()}catch(D){r.error(D)}}))};return t.subscribe(er(r,p,function(){h=!0,_()})),function(){a==null||a()}}function Xe(t,r,e){return e===void 0&&(e=1/0),et(r)?Xe(function(n,i){return Si(function(o,u){return r(n,o,i,u)})(Dt(t(n,i)))},e):(typeof r=="number"&&(e=r),or(function(n,i){return wi(n,i,t,e)}))}var Oi={url:"",deserializer:function(t){return JSON.parse(t.data)},serializer:function(t){return JSON.stringify(t)}},Ei="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",bi=function(t){kr(r,t);function r(e,n){var i=t.call(this)||this;if(i._socket=null,e instanceof H)i.destination=n,i.source=e;else{var o=i._config=Zn({},Oi);if(i._output=new rr,typeof e=="string")o.url=e;else for(var u in e)e.hasOwnProperty(u)&&(o[u]=e[u]);if(!o.WebSocketCtor&&WebSocket)o.WebSocketCtor=WebSocket;else if(!o.WebSocketCtor)throw new Error("no WebSocket constructor can be found");i.destination=new dr}return i}return r.prototype.lift=function(e){var n=new r(this._config,this.destination);return n.operator=e,n.source=this,n},r.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new dr),this._output=new rr},r.prototype.multiplex=function(e,n,i){var o=this;return new H(function(u){try{o.next(e())}catch(s){u.error(s)}var a=o.subscribe({next:function(s){try{i(s)&&u.next(s)}catch(f){u.error(f)}},error:function(s){return u.error(s)},complete:function(){return u.complete()}});return function(){try{o.next(n())}catch(s){u.error(s)}a.unsubscribe()}})},r.prototype._connectSocket=function(){var e=this,n=this._config,i=n.WebSocketCtor,o=n.protocol,u=n.url,a=n.binaryType,s=this._output,f=null;try{f=o?new i(u,o):new i(u),this._socket=f,a&&(this._socket.binaryType=a)}catch(h){s.error(h);return}var c=new Qn(function(){e._socket=null,f&&f.readyState===1&&f.close()});f.onopen=function(h){var _=e._socket;if(!_){f.close(),e._resetState();return}var p=e._config.openObserver;p&&p.next(h);var v=e.destination;e.destination=je.create(function(d){if(f.readyState===1)try{var b=e._config.serializer;f.send(b(d))}catch(M){e.destination.error(M)}},function(d){var b=e._config.closingObserver;b&&b.next(void 0),d&&d.code?f.close(d.code,d.reason):s.error(new TypeError(Ei)),e._resetState()},function(){var d=e._config.closingObserver;d&&d.next(void 0),f.close(),e._resetState()}),v&&v instanceof dr&&c.add(v.subscribe(e.destination))},f.onerror=function(h){e._resetState(),s.error(h)},f.onclose=function(h){f===e._socket&&e._resetState();var _=e._config.closeObserver;_&&_.next(h),h.wasClean?s.complete():s.error(h)},f.onmessage=function(h){try{var _=e._config.deserializer;s.next(_(h))}catch(p){s.error(p)}}},r.prototype._subscribe=function(e){var n=this,i=this.source;return i?i.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add(function(){var o=n._socket;n._output.observers.length===0&&(o&&(o.readyState===1||o.readyState===0)&&o.close(),n._resetState())}),e)},r.prototype.unsubscribe=function(){var e=this._socket;e&&(e.readyState===1||e.readyState===0)&&e.close(),this._resetState(),t.prototype.unsubscribe.call(this)},r}(Vn);function zi(t){return new bi(t)}function Ze(t,r){const e=location.protocol==="https:"?"wss:":"ws:",n=new URL(`${e}//${location.host}/${t}`);return Object.entries(r).forEach(([i,o])=>{n.searchParams.append(i,o)}),new zi({url:n.toString(),serializer:i=>i,deserializer:i=>i})}function Ii(){return Ze("ws/teacher"+location.search,{})}const Mi={audio:!0,video:!1};async function Ai(){const t=new rr;let r=new AudioContext({latencyHint:"interactive"});await r.audioWorklet.addModule("recorderWorkletProcessor.js"),r.resume();const e=await navigator.mediaDevices.getUserMedia(Mi);let n=r.createMediaStreamSource(e),i=new window.AudioWorkletNode(r,"recorder.worklet");return i.connect(r.destination),r.resume(),n.connect(i),i.port.onmessage=o=>{const u=o.data;t.next(u)},t.subscribe({complete(){e.getTracks()[0].stop(),n.disconnect(i),i.disconnect(r.destination),r.close().then(function(){n=null,i=null,r=null}),console.log("Recording completed")}}),t}var Wt="delete",S=5,W=1<<S,R=W-1,l={};function Er(){return{value:!1}}function C(t){t&&(t.value=!0)}function jr(){}function vt(t){return t.size===void 0&&(t.size=t.__iterate(Ve)),t.size}function ut(t,r){if(typeof r!="number"){var e=r>>>0;if(""+e!==r||e===4294967295)return NaN;r=e}return r<0?vt(t)+r:r}function Ve(){return!0}function ur(t,r,e){return(t===0&&!tn(t)||e!==void 0&&t<=-e)&&(r===void 0||e!==void 0&&r>=e)}function Ct(t,r){return Qe(t,r,0)}function ar(t,r){return Qe(t,r,r)}function Qe(t,r,e){return t===void 0?e:tn(t)?r===1/0?r:Math.max(0,r+t)|0:r===void 0||r===t?t:Math.min(r,t)|0}function tn(t){return t<0||t===0&&1/t===-1/0}var rn="@@__IMMUTABLE_ITERABLE__@@";function L(t){return Boolean(t&&t[rn])}var en="@@__IMMUTABLE_KEYED__@@";function O(t){return Boolean(t&&t[en])}var nn="@@__IMMUTABLE_INDEXED__@@";function j(t){return Boolean(t&&t[nn])}function sr(t){return O(t)||j(t)}var z=function(r){return L(r)?r:U(r)},F=function(t){function r(e){return O(e)?e:st(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(z),ht=function(t){function r(e){return j(e)?e:G(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(z),wt=function(t){function r(e){return L(e)&&!sr(e)?e:zt(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(z);z.Keyed=F;z.Indexed=ht;z.Set=wt;var on="@@__IMMUTABLE_SEQ__@@";function Lr(t){return Boolean(t&&t[on])}var un="@@__IMMUTABLE_RECORD__@@";function Ot(t){return Boolean(t&&t[un])}function V(t){return L(t)||Ot(t)}var Et="@@__IMMUTABLE_ORDERED__@@";function Y(t){return Boolean(t&&t[Et])}var xt=0,J=1,x=2,br=typeof Symbol=="function"&&Symbol.iterator,an="@@iterator",fr=br||an,y=function(r){this.next=r};y.prototype.toString=function(){return"[Iterator]"};y.KEYS=xt;y.VALUES=J;y.ENTRIES=x;y.prototype.inspect=y.prototype.toSource=function(){return this.toString()};y.prototype[fr]=function(){return this};function E(t,r,e,n){var i=t===0?r:t===1?e:[r,e];return n?n.value=i:n={value:i,done:!1},n}function $(){return{value:void 0,done:!0}}function sn(t){return Array.isArray(t)?!0:!!cr(t)}function se(t){return t&&typeof t.next=="function"}function zr(t){var r=cr(t);return r&&r.call(t)}function cr(t){var r=t&&(br&&t[br]||t[an]);if(typeof r=="function")return r}function qi(t){var r=cr(t);return r&&r===t.entries}function Ti(t){var r=cr(t);return r&&r===t.keys}var bt=Object.prototype.hasOwnProperty;function fn(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var U=function(t){function r(e){return e==null?Nr():V(e)?e.toSeq():ki(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.toSeq=function(){return this},r.prototype.toString=function(){return this.__toString("Seq {","}")},r.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},r.prototype.__iterate=function(n,i){var o=this._cache;if(o){for(var u=o.length,a=0;a!==u;){var s=o[i?u-++a:a++];if(n(s[1],s[0],this)===!1)break}return a}return this.__iterateUncached(n,i)},r.prototype.__iterator=function(n,i){var o=this._cache;if(o){var u=o.length,a=0;return new y(function(){if(a===u)return $();var s=o[i?u-++a:a++];return E(n,s[0],s[1])})}return this.__iteratorUncached(n,i)},r}(z),st=function(t){function r(e){return e==null?Nr().toKeyedSeq():L(e)?O(e)?e.toSeq():e.fromEntrySeq():Ot(e)?e.toSeq():Br(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.toKeyedSeq=function(){return this},r}(U),G=function(t){function r(e){return e==null?Nr():L(e)?O(e)?e.entrySeq():e.toIndexedSeq():Ot(e)?e.toSeq().entrySeq():cn(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){return r(arguments)},r.prototype.toIndexedSeq=function(){return this},r.prototype.toString=function(){return this.__toString("Seq [","]")},r}(U),zt=function(t){function r(e){return(L(e)&&!sr(e)?e:G(e)).toSetSeq()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){return r(arguments)},r.prototype.toSetSeq=function(){return this},r}(U);U.isSeq=Lr;U.Keyed=st;U.Set=zt;U.Indexed=G;U.prototype[on]=!0;var ct=function(t){function r(e){this._array=e,this.size=e.length}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.get=function(n,i){return this.has(n)?this._array[ut(this,n)]:i},r.prototype.__iterate=function(n,i){for(var o=this._array,u=o.length,a=0;a!==u;){var s=i?u-++a:a++;if(n(o[s],s,this)===!1)break}return a},r.prototype.__iterator=function(n,i){var o=this._array,u=o.length,a=0;return new y(function(){if(a===u)return $();var s=i?u-++a:a++;return E(n,s,o[s])})},r}(G),$r=function(t){function r(e){var n=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=n,this.size=n.length}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.get=function(n,i){return i!==void 0&&!this.has(n)?i:this._object[n]},r.prototype.has=function(n){return bt.call(this._object,n)},r.prototype.__iterate=function(n,i){for(var o=this._object,u=this._keys,a=u.length,s=0;s!==a;){var f=u[i?a-++s:s++];if(n(o[f],f,this)===!1)break}return s},r.prototype.__iterator=function(n,i){var o=this._object,u=this._keys,a=u.length,s=0;return new y(function(){if(s===a)return $();var f=u[i?a-++s:s++];return E(n,f,o[f])})},r}(st);$r.prototype[Et]=!0;var Ri=function(t){function r(e){this._collection=e,this.size=e.length||e.size}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.__iterateUncached=function(n,i){if(i)return this.cacheResult().__iterate(n,i);var o=this._collection,u=zr(o),a=0;if(se(u))for(var s;!(s=u.next()).done&&n(s.value,a++,this)!==!1;);return a},r.prototype.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=this._collection,u=zr(o);if(!se(u))return new y($);var a=0;return new y(function(){var s=u.next();return s.done?s:E(n,a++,s.value)})},r}(G),fe;function Nr(){return fe||(fe=new ct([]))}function Br(t){var r=Pr(t);if(r)return r.fromEntrySeq();if(typeof t=="object")return new $r(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function cn(t){var r=Pr(t);if(r)return r;throw new TypeError("Expected Array or collection object of values: "+t)}function ki(t){var r=Pr(t);if(r)return qi(t)?r.fromEntrySeq():Ti(t)?r.toSetSeq():r;if(typeof t=="object")return new $r(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function Pr(t){return fn(t)?new ct(t):sn(t)?new Ri(t):void 0}var hn="@@__IMMUTABLE_MAP__@@";function Ur(t){return Boolean(t&&t[hn])}function _n(t){return Ur(t)&&Y(t)}function ce(t){return Boolean(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function P(t,r){if(t===r||t!==t&&r!==r)return!0;if(!t||!r)return!1;if(typeof t.valueOf=="function"&&typeof r.valueOf=="function"){if(t=t.valueOf(),r=r.valueOf(),t===r||t!==t&&r!==r)return!0;if(!t||!r)return!1}return!!(ce(t)&&ce(r)&&t.equals(r))}var qt=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(r,e){r|=0,e|=0;var n=r&65535,i=e&65535;return n*i+((r>>>16)*i+n*(e>>>16)<<16>>>0)|0};function hr(t){return t>>>1&1073741824|t&3221225471}var ji=Object.prototype.valueOf;function N(t){if(t==null)return he(t);if(typeof t.hashCode=="function")return hr(t.hashCode(t));var r=Ui(t);if(r==null)return he(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return Li(r);case"string":return r.length>Di?$i(r):Ir(r);case"object":case"function":return Bi(r);case"symbol":return Ni(r);default:if(typeof r.toString=="function")return Ir(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function he(t){return t===null?1108378658:1108378659}function Li(t){if(t!==t||t===1/0)return 0;var r=t|0;for(r!==t&&(r^=t*4294967295);t>4294967295;)t/=4294967295,r^=t;return hr(r)}function $i(t){var r=gr[t];return r===void 0&&(r=Ir(t),yr===Wi&&(yr=0,gr={}),yr++,gr[t]=r),r}function Ir(t){for(var r=0,e=0;e<t.length;e++)r=31*r+t.charCodeAt(e)|0;return hr(r)}function Ni(t){var r=ve[t];return r!==void 0||(r=pn(),ve[t]=r),r}function Bi(t){var r;if(Mr&&(r=Ar.get(t),r!==void 0)||(r=t[ft],r!==void 0)||!pe&&(r=t.propertyIsEnumerable&&t.propertyIsEnumerable[ft],r!==void 0||(r=Pi(t),r!==void 0)))return r;if(r=pn(),Mr)Ar.set(t,r);else{if(_e!==void 0&&_e(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(pe)Object.defineProperty(t,ft,{enumerable:!1,configurable:!1,writable:!1,value:r});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[ft]=r;else if(t.nodeType!==void 0)t[ft]=r;else throw new Error("Unable to set a non-enumerable property on object.")}return r}var _e=Object.isExtensible,pe=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Pi(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function Ui(t){return t.valueOf!==ji&&typeof t.valueOf=="function"?t.valueOf(t):t}function pn(){var t=++lr;return lr&1073741824&&(lr=0),t}var Mr=typeof WeakMap=="function",Ar;Mr&&(Ar=new WeakMap);var ve=Object.create(null),lr=0,ft="__immutablehash__";typeof Symbol=="function"&&(ft=Symbol(ft));var Di=16,Wi=255,yr=0,gr={},_r=function(t){function r(e,n){this._iter=e,this._useKeys=n,this.size=e.size}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.get=function(n,i){return this._iter.get(n,i)},r.prototype.has=function(n){return this._iter.has(n)},r.prototype.valueSeq=function(){return this._iter.valueSeq()},r.prototype.reverse=function(){var n=this,i=Dr(this,!0);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().reverse()}),i},r.prototype.map=function(n,i){var o=this,u=gn(this,n,i);return this._useKeys||(u.valueSeq=function(){return o._iter.toSeq().map(n,i)}),u},r.prototype.__iterate=function(n,i){var o=this;return this._iter.__iterate(function(u,a){return n(u,a,o)},i)},r.prototype.__iterator=function(n,i){return this._iter.__iterator(n,i)},r}(st);_r.prototype[Et]=!0;var vn=function(t){function r(e){this._iter=e,this.size=e.size}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.includes=function(n){return this._iter.includes(n)},r.prototype.__iterate=function(n,i){var o=this,u=0;return i&&vt(this),this._iter.__iterate(function(a){return n(a,i?o.size-++u:u++,o)},i)},r.prototype.__iterator=function(n,i){var o=this,u=this._iter.__iterator(J,i),a=0;return i&&vt(this),new y(function(){var s=u.next();return s.done?s:E(n,i?o.size-++a:a++,s.value,s)})},r}(G),dn=function(t){function r(e){this._iter=e,this.size=e.size}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.has=function(n){return this._iter.includes(n)},r.prototype.__iterate=function(n,i){var o=this;return this._iter.__iterate(function(u){return n(u,u,o)},i)},r.prototype.__iterator=function(n,i){var o=this._iter.__iterator(J,i);return new y(function(){var u=o.next();return u.done?u:E(n,u.value,u.value,u)})},r}(zt),ln=function(t){function r(e){this._iter=e,this.size=e.size}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.entrySeq=function(){return this._iter.toSeq()},r.prototype.__iterate=function(n,i){var o=this;return this._iter.__iterate(function(u){if(u){le(u);var a=L(u);return n(a?u.get(1):u[1],a?u.get(0):u[0],o)}},i)},r.prototype.__iterator=function(n,i){var o=this._iter.__iterator(J,i);return new y(function(){for(;;){var u=o.next();if(u.done)return u;var a=u.value;if(a){le(a);var s=L(a);return E(n,s?a.get(0):a[0],s?a.get(1):a[1],u)}}})},r}(st);vn.prototype.cacheResult=_r.prototype.cacheResult=dn.prototype.cacheResult=ln.prototype.cacheResult=xr;function yn(t){var r=Q(t);return r._iter=t,r.size=t.size,r.flip=function(){return t},r.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},r.has=function(e){return t.includes(e)},r.includes=function(e){return t.has(e)},r.cacheResult=xr,r.__iterateUncached=function(e,n){var i=this;return t.__iterate(function(o,u){return e(u,o,i)!==!1},n)},r.__iteratorUncached=function(e,n){if(e===x){var i=t.__iterator(e,n);return new y(function(){var o=i.next();if(!o.done){var u=o.value[0];o.value[0]=o.value[1],o.value[1]=u}return o})}return t.__iterator(e===J?xt:J,n)},r}function gn(t,r,e){var n=Q(t);return n.size=t.size,n.has=function(i){return t.has(i)},n.get=function(i,o){var u=t.get(i,l);return u===l?o:r.call(e,u,i,t)},n.__iterateUncached=function(i,o){var u=this;return t.__iterate(function(a,s,f){return i(r.call(e,a,s,f),s,u)!==!1},o)},n.__iteratorUncached=function(i,o){var u=t.__iterator(x,o);return new y(function(){var a=u.next();if(a.done)return a;var s=a.value,f=s[0];return E(i,f,r.call(e,s[1],f,t),a)})},n}function Dr(t,r){var e=this,n=Q(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var i=yn(t);return i.reverse=function(){return t.flip()},i}),n.get=function(i,o){return t.get(r?i:-1-i,o)},n.has=function(i){return t.has(r?i:-1-i)},n.includes=function(i){return t.includes(i)},n.cacheResult=xr,n.__iterate=function(i,o){var u=this,a=0;return o&&vt(t),t.__iterate(function(s,f){return i(s,r?f:o?u.size-++a:a++,u)},!o)},n.__iterator=function(i,o){var u=0;o&&vt(t);var a=t.__iterator(x,!o);return new y(function(){var s=a.next();if(s.done)return s;var f=s.value;return E(i,r?f[0]:o?e.size-++u:u++,f[1],s)})},n}function mn(t,r,e,n){var i=Q(t);return n&&(i.has=function(o){var u=t.get(o,l);return u!==l&&!!r.call(e,u,o,t)},i.get=function(o,u){var a=t.get(o,l);return a!==l&&r.call(e,a,o,t)?a:u}),i.__iterateUncached=function(o,u){var a=this,s=0;return t.__iterate(function(f,c,h){if(r.call(e,f,c,h))return s++,o(f,n?c:s-1,a)},u),s},i.__iteratorUncached=function(o,u){var a=t.__iterator(x,u),s=0;return new y(function(){for(;;){var f=a.next();if(f.done)return f;var c=f.value,h=c[0],_=c[1];if(r.call(e,_,h,t))return E(o,n?h:s++,_,f)}})},i}function Ci(t,r,e){var n=Mt().asMutable();return t.__iterate(function(i,o){n.update(r.call(e,i,o,t),0,function(u){return u+1})}),n.asImmutable()}function xi(t,r,e){var n=O(t),i=(Y(t)?rt():Mt()).asMutable();t.__iterate(function(u,a){i.update(r.call(e,u,a,t),function(s){return s=s||[],s.push(n?[a,u]:u),s})});var o=Cr(t);return i.map(function(u){return g(t,o(u))}).asImmutable()}function Fi(t,r,e){var n=O(t),i=[[],[]];t.__iterate(function(u,a){i[r.call(e,u,a,t)?1:0].push(n?[a,u]:u)});var o=Cr(t);return i.map(function(u){return g(t,o(u))})}function Wr(t,r,e,n){var i=t.size;if(ur(r,e,i))return t;var o=Ct(r,i),u=ar(e,i);if(o!==o||u!==u)return Wr(t.toSeq().cacheResult(),r,e,n);var a=u-o,s;a===a&&(s=a<0?0:a);var f=Q(t);return f.size=s===0?s:t.size&&s||void 0,!n&&Lr(t)&&s>=0&&(f.get=function(c,h){return c=ut(this,c),c>=0&&c<s?t.get(c+o,h):h}),f.__iterateUncached=function(c,h){var _=this;if(s===0)return 0;if(h)return this.cacheResult().__iterate(c,h);var p=0,v=!0,d=0;return t.__iterate(function(b,M){if(!(v&&(v=p++<o)))return d++,c(b,n?M:d-1,_)!==!1&&d!==s}),d},f.__iteratorUncached=function(c,h){if(s!==0&&h)return this.cacheResult().__iterator(c,h);if(s===0)return new y($);var _=t.__iterator(c,h),p=0,v=0;return new y(function(){for(;p++<o;)_.next();if(++v>s)return $();var d=_.next();return n||c===J||d.done?d:c===xt?E(c,v-1,void 0,d):E(c,v-1,d.value[1],d)})},f}function Ki(t,r,e){var n=Q(t);return n.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var a=0;return t.__iterate(function(s,f,c){return r.call(e,s,f,c)&&++a&&i(s,f,u)}),a},n.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(x,o),s=!0;return new y(function(){if(!s)return $();var f=a.next();if(f.done)return f;var c=f.value,h=c[0],_=c[1];return r.call(e,_,h,u)?i===x?f:E(i,h,_,f):(s=!1,$())})},n}function Sn(t,r,e,n){var i=Q(t);return i.__iterateUncached=function(o,u){var a=this;if(u)return this.cacheResult().__iterate(o,u);var s=!0,f=0;return t.__iterate(function(c,h,_){if(!(s&&(s=r.call(e,c,h,_))))return f++,o(c,n?h:f-1,a)}),f},i.__iteratorUncached=function(o,u){var a=this;if(u)return this.cacheResult().__iterator(o,u);var s=t.__iterator(x,u),f=!0,c=0;return new y(function(){var h,_,p;do{if(h=s.next(),h.done)return n||o===J?h:o===xt?E(o,c++,void 0,h):E(o,c++,h.value[1],h);var v=h.value;_=v[0],p=v[1],f&&(f=r.call(e,p,_,a))}while(f);return o===x?h:E(o,_,p,h)})},i}function Yi(t,r){var e=O(t),n=[t].concat(r).map(function(u){return L(u)?e&&(u=F(u)):u=e?Br(u):cn(Array.isArray(u)?u:[u]),u}).filter(function(u){return u.size!==0});if(n.length===0)return t;if(n.length===1){var i=n[0];if(i===t||e&&O(i)||j(t)&&j(i))return i}var o=new ct(n);return e?o=o.toKeyedSeq():j(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=n.reduce(function(u,a){if(u!==void 0){var s=a.size;if(s!==void 0)return u+s}},0),o}function wn(t,r,e){var n=Q(t);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var u=0,a=!1;function s(f,c){f.__iterate(function(h,_){return(!r||c<r)&&L(h)?s(h,c+1):(u++,i(h,e?_:u-1,n)===!1&&(a=!0)),!a},o)}return s(t,0),u},n.__iteratorUncached=function(i,o){if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(i,o),a=[],s=0;return new y(function(){for(;u;){var f=u.next();if(f.done!==!1){u=a.pop();continue}var c=f.value;if(i===x&&(c=c[1]),(!r||a.length<r)&&L(c))a.push(u),u=c.__iterator(i,o);else return e?f:E(i,s++,c,f)}return $()})},n}function Hi(t,r,e){var n=Cr(t);return t.toSeq().map(function(i,o){return n(r.call(e,i,o,t))}).flatten(!0)}function Ji(t,r){var e=Q(t);return e.size=t.size&&t.size*2-1,e.__iterateUncached=function(n,i){var o=this,u=0;return t.__iterate(function(a){return(!u||n(r,u++,o)!==!1)&&n(a,u++,o)!==!1},i),u},e.__iteratorUncached=function(n,i){var o=t.__iterator(J,i),u=0,a;return new y(function(){return(!a||u%2)&&(a=o.next(),a.done)?a:u%2?E(n,u++,r):E(n,u++,a.value,a)})},e}function dt(t,r,e){r||(r=On);var n=O(t),i=0,o=t.toSeq().map(function(u,a){return[a,u,i++,e?e(u,a,t):u]}).valueSeq().toArray();return o.sort(function(u,a){return r(u[3],a[3])||u[2]-a[2]}).forEach(n?function(u,a){o[a].length=2}:function(u,a){o[a]=u[1]}),n?st(o):j(t)?G(o):zt(o)}function Xt(t,r,e){if(r||(r=On),e){var n=t.toSeq().map(function(i,o){return[i,e(i,o,t)]}).reduce(function(i,o){return de(r,i[1],o[1])?o:i});return n&&n[0]}return t.reduce(function(i,o){return de(r,i,o)?o:i})}function de(t,r,e){var n=t(e,r);return n===0&&e!==r&&(e==null||e!==e)||n>0}function Zt(t,r,e,n){var i=Q(t),o=new ct(e).map(function(u){return u.size});return i.size=n?o.max():o.min(),i.__iterate=function(u,a){for(var s=this.__iterator(J,a),f,c=0;!(f=s.next()).done&&u(f.value,c++,this)!==!1;);return c},i.__iteratorUncached=function(u,a){var s=e.map(function(h){return h=z(h),zr(a?h.reverse():h)}),f=0,c=!1;return new y(function(){var h;return c||(h=s.map(function(_){return _.next()}),c=n?h.every(function(_){return _.done}):h.some(function(_){return _.done})),c?$():E(u,f++,r.apply(null,h.map(function(_){return _.value})))})},i}function g(t,r){return t===r?t:Lr(t)?r:t.constructor(r)}function le(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Cr(t){return O(t)?F:j(t)?ht:wt}function Q(t){return Object.create((O(t)?st:j(t)?G:zt).prototype)}function xr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):U.prototype.cacheResult.call(this)}function On(t,r){return t===void 0&&r===void 0?0:t===void 0?1:r===void 0?-1:t>r?1:t<r?-1:0}function Z(t,r){r=r||0;for(var e=Math.max(0,t.length-r),n=new Array(e),i=0;i<e;i++)n[i]=t[i+r];return n}function Fr(t,r){if(!t)throw new Error(r)}function B(t){Fr(t!==1/0,"Cannot perform this action with an infinite size.")}function En(t){if(fn(t)&&typeof t!="string")return t;if(Y(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var Gi=Object.prototype.toString;function Xi(t){if(!t||typeof t!="object"||Gi.call(t)!=="[object Object]")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;for(var e=r,n=Object.getPrototypeOf(r);n!==null;)e=n,n=Object.getPrototypeOf(e);return e===r}function at(t){return typeof t=="object"&&(V(t)||Array.isArray(t)||Xi(t))}function Lt(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function Zi(t,r){return V(t)?t.has(r):at(t)&&bt.call(t,r)}function bn(t,r,e){return V(t)?t.get(r,e):Zi(t,r)?typeof t.get=="function"?t.get(r):t[r]:e}function nr(t){if(Array.isArray(t))return Z(t);var r={};for(var e in t)bt.call(t,e)&&(r[e]=t[e]);return r}function Vi(t,r){if(!at(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(V(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(r)}if(!bt.call(t,r))return t;var e=nr(t);return Array.isArray(e)?e.splice(r,1):delete e[r],e}function Qi(t,r,e){if(!at(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(V(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(r,e)}if(bt.call(t,r)&&e===t[r])return t;var n=nr(t);return n[r]=e,n}function It(t,r,e,n){n||(n=e,e=void 0);var i=zn(V(t),t,En(r),0,e,n);return i===l?e:i}function zn(t,r,e,n,i,o){var u=r===l;if(n===e.length){var a=u?i:r,s=o(a);return s===a?r:s}if(!u&&!at(r))throw new TypeError("Cannot update within non-data-structure value in path ["+e.slice(0,n).map(Lt)+"]: "+r);var f=e[n],c=u?l:bn(r,f,l),h=zn(c===l?t:V(c),c,e,n+1,i,o);return h===c?r:h===l?Vi(r,f):Qi(u?t?K():{}:r,f,h)}function to(t,r,e){return It(t,r,l,function(){return e})}function Kr(t,r){return to(this,t,r)}function ro(t,r){return It(t,r,function(){return l})}function Yr(t){return ro(this,t)}function In(t,r,e,n){return It(t,[r],e,n)}function Hr(t,r,e){return arguments.length===1?t(this):In(this,t,r,e)}function Jr(t,r,e){return It(this,t,r,e)}function Mn(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return qn(this,t)}function An(t){for(var r=[],e=arguments.length-1;e-- >0;)r[e]=arguments[e+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return qn(this,r,t)}function qn(t,r,e){for(var n=[],i=0;i<r.length;i++){var o=F(r[i]);o.size!==0&&n.push(o)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(u){for(var a=e?function(f,c){In(u,c,l,function(h){return h===l?f:e(h,f,c)})}:function(f,c){u.set(c,f)},s=0;s<n.length;s++)n[s].forEach(a)})}function Gr(t,r,e){return Xr(t,r,eo(e))}function Xr(t,r,e){if(!at(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(V(t))return typeof e=="function"&&t.mergeWith?t.mergeWith.apply(t,[e].concat(r)):t.merge?t.merge.apply(t,r):t.concat.apply(t,r);for(var n=Array.isArray(t),i=t,o=n?ht:F,u=n?function(s){i===t&&(i=nr(i)),i.push(s)}:function(s,f){var c=bt.call(i,f),h=c&&e?e(i[f],s,f):s;(!c||h!==i[f])&&(i===t&&(i=nr(i)),i[f]=h)},a=0;a<r.length;a++)o(r[a]).forEach(u);return i}function eo(t){function r(e,n,i){return at(e)&&at(n)&&no(e,n)?Xr(e,[n],r):t?t(e,n,i):n}return r}function no(t,r){var e=U(t),n=U(r);return j(e)===j(n)&&O(e)===O(n)}function Tn(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return Gr(this,t)}function Rn(t){for(var r=[],e=arguments.length-1;e-- >0;)r[e]=arguments[e+1];return Gr(this,r,t)}function Zr(t){for(var r=[],e=arguments.length-1;e-- >0;)r[e]=arguments[e+1];return It(this,t,K(),function(n){return Xr(n,r)})}function Vr(t){for(var r=[],e=arguments.length-1;e-- >0;)r[e]=arguments[e+1];return It(this,t,K(),function(n){return Gr(n,r)})}function Ft(t){var r=this.asMutable();return t(r),r.wasAltered()?r.__ensureOwner(this.__ownerID):this}function Kt(){return this.__ownerID?this:this.__ensureOwner(new jr)}function Yt(){return this.__ensureOwner()}function Qr(){return this.__altered}var Mt=function(t){function r(e){return e==null?K():Ur(e)&&!Y(e)?e:K().withMutations(function(n){var i=t(e);B(i.size),i.forEach(function(o,u){return n.set(u,o)})})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return K().withMutations(function(o){for(var u=0;u<n.length;u+=2){if(u+1>=n.length)throw new Error("Missing value for key: "+n[u]);o.set(n[u],n[u+1])}})},r.prototype.toString=function(){return this.__toString("Map {","}")},r.prototype.get=function(n,i){return this._root?this._root.get(0,void 0,n,i):i},r.prototype.set=function(n,i){return me(this,n,i)},r.prototype.remove=function(n){return me(this,n,l)},r.prototype.deleteAll=function(n){var i=z(n);return i.size===0?this:this.withMutations(function(o){i.forEach(function(u){return o.remove(u)})})},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):K()},r.prototype.sort=function(n){return rt(dt(this,n))},r.prototype.sortBy=function(n,i){return rt(dt(this,i,n))},r.prototype.map=function(n,i){var o=this;return this.withMutations(function(u){u.forEach(function(a,s){u.set(s,n.call(i,a,s,o))})})},r.prototype.__iterator=function(n,i){return new io(this,n,i)},r.prototype.__iterate=function(n,i){var o=this,u=0;return this._root&&this._root.iterate(function(a){return u++,n(a[1],a[0],o)},i),u},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?te(this.size,this._root,n,this.__hash):this.size===0?K():(this.__ownerID=n,this.__altered=!1,this)},r}(F);Mt.isMap=Ur;var w=Mt.prototype;w[hn]=!0;w[Wt]=w.remove;w.removeAll=w.deleteAll;w.setIn=Kr;w.removeIn=w.deleteIn=Yr;w.update=Hr;w.updateIn=Jr;w.merge=w.concat=Mn;w.mergeWith=An;w.mergeDeep=Tn;w.mergeDeepWith=Rn;w.mergeIn=Zr;w.mergeDeepIn=Vr;w.withMutations=Ft;w.wasAltered=Qr;w.asImmutable=Yt;w["@@transducer/init"]=w.asMutable=Kt;w["@@transducer/step"]=function(t,r){return t.set(r[0],r[1])};w["@@transducer/result"]=function(t){return t.asImmutable()};var $t=function(r,e){this.ownerID=r,this.entries=e};$t.prototype.get=function(r,e,n,i){for(var o=this.entries,u=0,a=o.length;u<a;u++)if(P(n,o[u][0]))return o[u][1];return i};$t.prototype.update=function(r,e,n,i,o,u,a){for(var s=o===l,f=this.entries,c=0,h=f.length;c<h&&!P(i,f[c][0]);c++);var _=c<h;if(_?f[c][1]===o:s)return this;if(C(a),(s||!_)&&C(u),!(s&&f.length===1)){if(!_&&!s&&f.length>=co)return oo(r,f,i,o);var p=r&&r===this.ownerID,v=p?f:Z(f);return _?s?c===h-1?v.pop():v[c]=v.pop():v[c]=[i,o]:v.push([i,o]),p?(this.entries=v,this):new $t(r,v)}};var lt=function(r,e,n){this.ownerID=r,this.bitmap=e,this.nodes=n};lt.prototype.get=function(r,e,n,i){e===void 0&&(e=N(n));var o=1<<((r===0?e:e>>>r)&R),u=this.bitmap;return u&o?this.nodes[kn(u&o-1)].get(r+S,e,n,i):i};lt.prototype.update=function(r,e,n,i,o,u,a){n===void 0&&(n=N(i));var s=(e===0?n:n>>>e)&R,f=1<<s,c=this.bitmap,h=(c&f)!==0;if(!h&&o===l)return this;var _=kn(c&f-1),p=this.nodes,v=h?p[_]:void 0,d=re(v,r,e+S,n,i,o,u,a);if(d===v)return this;if(!h&&d&&p.length>=ho)return ao(r,p,c,s,d);if(h&&!d&&p.length===2&&Se(p[_^1]))return p[_^1];if(h&&d&&p.length===1&&Se(d))return d;var b=r&&r===this.ownerID,M=h?d?c:c^f:c|f,D=h?d?jn(p,_,d,b):fo(p,_,b):so(p,_,d,b);return b?(this.bitmap=M,this.nodes=D,this):new lt(r,M,D)};var Nt=function(r,e,n){this.ownerID=r,this.count=e,this.nodes=n};Nt.prototype.get=function(r,e,n,i){e===void 0&&(e=N(n));var o=(r===0?e:e>>>r)&R,u=this.nodes[o];return u?u.get(r+S,e,n,i):i};Nt.prototype.update=function(r,e,n,i,o,u,a){n===void 0&&(n=N(i));var s=(e===0?n:n>>>e)&R,f=o===l,c=this.nodes,h=c[s];if(f&&!h)return this;var _=re(h,r,e+S,n,i,o,u,a);if(_===h)return this;var p=this.count;if(!h)p++;else if(!_&&(p--,p<_o))return uo(r,c,p,s);var v=r&&r===this.ownerID,d=jn(c,s,_,v);return v?(this.count=p,this.nodes=d,this):new Nt(r,p,d)};var yt=function(r,e,n){this.ownerID=r,this.keyHash=e,this.entries=n};yt.prototype.get=function(r,e,n,i){for(var o=this.entries,u=0,a=o.length;u<a;u++)if(P(n,o[u][0]))return o[u][1];return i};yt.prototype.update=function(r,e,n,i,o,u,a){n===void 0&&(n=N(i));var s=o===l;if(n!==this.keyHash)return s?this:(C(a),C(u),ee(this,r,e,n,[i,o]));for(var f=this.entries,c=0,h=f.length;c<h&&!P(i,f[c][0]);c++);var _=c<h;if(_?f[c][1]===o:s)return this;if(C(a),(s||!_)&&C(u),s&&h===2)return new tt(r,this.keyHash,f[c^1]);var p=r&&r===this.ownerID,v=p?f:Z(f);return _?s?c===h-1?v.pop():v[c]=v.pop():v[c]=[i,o]:v.push([i,o]),p?(this.entries=v,this):new yt(r,this.keyHash,v)};var tt=function(r,e,n){this.ownerID=r,this.keyHash=e,this.entry=n};tt.prototype.get=function(r,e,n,i){return P(n,this.entry[0])?this.entry[1]:i};tt.prototype.update=function(r,e,n,i,o,u,a){var s=o===l,f=P(i,this.entry[0]);if(f?o===this.entry[1]:s)return this;if(C(a),s){C(u);return}return f?r&&r===this.ownerID?(this.entry[1]=o,this):new tt(r,this.keyHash,[i,o]):(C(u),ee(this,r,e,N(i),[i,o]))};$t.prototype.iterate=yt.prototype.iterate=function(t,r){for(var e=this.entries,n=0,i=e.length-1;n<=i;n++)if(t(e[r?i-n:n])===!1)return!1};lt.prototype.iterate=Nt.prototype.iterate=function(t,r){for(var e=this.nodes,n=0,i=e.length-1;n<=i;n++){var o=e[r?i-n:n];if(o&&o.iterate(t,r)===!1)return!1}};tt.prototype.iterate=function(t,r){return t(this.entry)};var io=function(t){function r(e,n,i){this._type=n,this._reverse=i,this._stack=e._root&&ye(e._root)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.next=function(){for(var n=this._type,i=this._stack;i;){var o=i.node,u=i.index++,a=void 0;if(o.entry){if(u===0)return mr(n,o.entry)}else if(o.entries){if(a=o.entries.length-1,u<=a)return mr(n,o.entries[this._reverse?a-u:u])}else if(a=o.nodes.length-1,u<=a){var s=o.nodes[this._reverse?a-u:u];if(s){if(s.entry)return mr(n,s.entry);i=this._stack=ye(s,i)}continue}i=this._stack=this._stack.__prev}return $()},r}(y);function mr(t,r){return E(t,r[0],r[1])}function ye(t,r){return{node:t,index:0,__prev:r}}function te(t,r,e,n){var i=Object.create(w);return i.size=t,i._root=r,i.__ownerID=e,i.__hash=n,i.__altered=!1,i}var ge;function K(){return ge||(ge=te(0))}function me(t,r,e){var n,i;if(t._root){var o=Er(),u=Er();if(n=re(t._root,t.__ownerID,0,void 0,r,e,o,u),!u.value)return t;i=t.size+(o.value?e===l?-1:1:0)}else{if(e===l)return t;i=1,n=new $t(t.__ownerID,[[r,e]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?te(i,n):K()}function re(t,r,e,n,i,o,u,a){return t?t.update(r,e,n,i,o,u,a):o===l?t:(C(a),C(u),new tt(r,n,[i,o]))}function Se(t){return t.constructor===tt||t.constructor===yt}function ee(t,r,e,n,i){if(t.keyHash===n)return new yt(r,n,[t.entry,i]);var o=(e===0?t.keyHash:t.keyHash>>>e)&R,u=(e===0?n:n>>>e)&R,a,s=o===u?[ee(t,r,e+S,n,i)]:(a=new tt(r,n,i),o<u?[t,a]:[a,t]);return new lt(r,1<<o|1<<u,s)}function oo(t,r,e,n){t||(t=new jr);for(var i=new tt(t,N(e),[e,n]),o=0;o<r.length;o++){var u=r[o];i=i.update(t,0,void 0,u[0],u[1])}return i}function uo(t,r,e,n){for(var i=0,o=0,u=new Array(e),a=0,s=1,f=r.length;a<f;a++,s<<=1){var c=r[a];c!==void 0&&a!==n&&(i|=s,u[o++]=c)}return new lt(t,i,u)}function ao(t,r,e,n,i){for(var o=0,u=new Array(W),a=0;e!==0;a++,e>>>=1)u[a]=e&1?r[o++]:void 0;return u[n]=i,new Nt(t,o+1,u)}function kn(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function jn(t,r,e,n){var i=n?t:Z(t);return i[r]=e,i}function so(t,r,e,n){var i=t.length+1;if(n&&r+1===i)return t[r]=e,t;for(var o=new Array(i),u=0,a=0;a<i;a++)a===r?(o[a]=e,u=-1):o[a]=t[a+u];return o}function fo(t,r,e){var n=t.length-1;if(e&&r===n)return t.pop(),t;for(var i=new Array(n),o=0,u=0;u<n;u++)u===r&&(o=1),i[u]=t[u+o];return i}var co=W/4,ho=W/2,_o=W/4,Ln="@@__IMMUTABLE_LIST__@@";function $n(t){return Boolean(t&&t[Ln])}var Ht=function(t){function r(e){var n=tr();if(e==null)return n;if($n(e))return e;var i=t(e),o=i.size;return o===0?n:(B(o),o>0&&o<W?Bt(0,o,S,null,new ot(i.toArray())):n.withMutations(function(u){u.setSize(o),i.forEach(function(a,s){return u.set(s,a)})}))}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("List [","]")},r.prototype.get=function(n,i){if(n=ut(this,n),n>=0&&n<this.size){n+=this._origin;var o=Nn(this,n);return o&&o.array[n&R]}return i},r.prototype.set=function(n,i){return po(this,n,i)},r.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},r.prototype.insert=function(n,i){return this.splice(n,0,i)},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=S,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):tr()},r.prototype.push=function(){var n=arguments,i=this.size;return this.withMutations(function(o){nt(o,0,i+n.length);for(var u=0;u<n.length;u++)o.set(i+u,n[u])})},r.prototype.pop=function(){return nt(this,0,-1)},r.prototype.unshift=function(){var n=arguments;return this.withMutations(function(i){nt(i,-n.length);for(var o=0;o<n.length;o++)i.set(o,n[o])})},r.prototype.shift=function(){return nt(this,1)},r.prototype.concat=function(){for(var n=arguments,i=[],o=0;o<arguments.length;o++){var u=n[o],a=t(typeof u!="string"&&sn(u)?u:[u]);a.size!==0&&i.push(a)}return i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(s){i.forEach(function(f){return f.forEach(function(c){return s.push(c)})})})},r.prototype.setSize=function(n){return nt(this,0,n)},r.prototype.map=function(n,i){var o=this;return this.withMutations(function(u){for(var a=0;a<o.size;a++)u.set(a,n.call(i,u.get(a),a,o))})},r.prototype.slice=function(n,i){var o=this.size;return ur(n,i,o)?this:nt(this,Ct(n,o),ar(i,o))},r.prototype.__iterator=function(n,i){var o=i?this.size:0,u=we(this,i);return new y(function(){var a=u();return a===jt?$():E(n,i?--o:o++,a)})},r.prototype.__iterate=function(n,i){for(var o=i?this.size:0,u=we(this,i),a;(a=u())!==jt&&n(a,i?--o:o++,this)!==!1;);return o},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Bt(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?tr():(this.__ownerID=n,this.__altered=!1,this)},r}(ht);Ht.isList=$n;var I=Ht.prototype;I[Ln]=!0;I[Wt]=I.remove;I.merge=I.concat;I.setIn=Kr;I.deleteIn=I.removeIn=Yr;I.update=Hr;I.updateIn=Jr;I.mergeIn=Zr;I.mergeDeepIn=Vr;I.withMutations=Ft;I.wasAltered=Qr;I.asImmutable=Yt;I["@@transducer/init"]=I.asMutable=Kt;I["@@transducer/step"]=function(t,r){return t.push(r)};I["@@transducer/result"]=function(t){return t.asImmutable()};var ot=function(r,e){this.array=r,this.ownerID=e};ot.prototype.removeBefore=function(r,e,n){if(n===e?1<<e:this.array.length===0)return this;var i=n>>>e&R;if(i>=this.array.length)return new ot([],r);var o=i===0,u;if(e>0){var a=this.array[i];if(u=a&&a.removeBefore(r,e-S,n),u===a&&o)return this}if(o&&!u)return this;var s=gt(this,r);if(!o)for(var f=0;f<i;f++)s.array[f]=void 0;return u&&(s.array[i]=u),s};ot.prototype.removeAfter=function(r,e,n){if(n===(e?1<<e:0)||this.array.length===0)return this;var i=n-1>>>e&R;if(i>=this.array.length)return this;var o;if(e>0){var u=this.array[i];if(o=u&&u.removeAfter(r,e-S,n),o===u&&i===this.array.length-1)return this}var a=gt(this,r);return a.array.splice(i+1),o&&(a.array[i]=o),a};var jt={};function we(t,r){var e=t._origin,n=t._capacity,i=Pt(n),o=t._tail;return u(t._root,t._level,0);function u(f,c,h){return c===0?a(f,h):s(f,c,h)}function a(f,c){var h=c===i?o&&o.array:f&&f.array,_=c>e?0:e-c,p=n-c;return p>W&&(p=W),function(){if(_===p)return jt;var v=r?--p:_++;return h&&h[v]}}function s(f,c,h){var _,p=f&&f.array,v=h>e?0:e-h>>c,d=(n-h>>c)+1;return d>W&&(d=W),function(){for(;;){if(_){var b=_();if(b!==jt)return b;_=null}if(v===d)return jt;var M=r?--d:v++;_=u(p&&p[M],c-S,h+(M<<c))}}}}function Bt(t,r,e,n,i,o,u){var a=Object.create(I);return a.size=r-t,a._origin=t,a._capacity=r,a._level=e,a._root=n,a._tail=i,a.__ownerID=o,a.__hash=u,a.__altered=!1,a}var Oe;function tr(){return Oe||(Oe=Bt(0,0,S))}function po(t,r,e){if(r=ut(t,r),r!==r)return t;if(r>=t.size||r<0)return t.withMutations(function(u){r<0?nt(u,r).set(0,e):nt(u,0,r+1).set(r,e)});r+=t._origin;var n=t._tail,i=t._root,o=Er();return r>=Pt(t._capacity)?n=qr(n,t.__ownerID,0,r,e,o):i=qr(i,t.__ownerID,t._level,r,e,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Bt(t._origin,t._capacity,t._level,i,n):t}function qr(t,r,e,n,i,o){var u=n>>>e&R,a=t&&u<t.array.length;if(!a&&i===void 0)return t;var s;if(e>0){var f=t&&t.array[u],c=qr(f,r,e-S,n,i,o);return c===f?t:(s=gt(t,r),s.array[u]=c,s)}return a&&t.array[u]===i?t:(o&&C(o),s=gt(t,r),i===void 0&&u===s.array.length-1?s.array.pop():s.array[u]=i,s)}function gt(t,r){return r&&t&&r===t.ownerID?t:new ot(t?t.array.slice():[],r)}function Nn(t,r){if(r>=Pt(t._capacity))return t._tail;if(r<1<<t._level+S){for(var e=t._root,n=t._level;e&&n>0;)e=e.array[r>>>n&R],n-=S;return e}}function nt(t,r,e){r!==void 0&&(r|=0),e!==void 0&&(e|=0);var n=t.__ownerID||new jr,i=t._origin,o=t._capacity,u=i+r,a=e===void 0?o:e<0?o+e:i+e;if(u===i&&a===o)return t;if(u>=a)return t.clear();for(var s=t._level,f=t._root,c=0;u+c<0;)f=new ot(f&&f.array.length?[void 0,f]:[],n),s+=S,c+=1<<s;c&&(u+=c,i+=c,a+=c,o+=c);for(var h=Pt(o),_=Pt(a);_>=1<<s+S;)f=new ot(f&&f.array.length?[f]:[],n),s+=S;var p=t._tail,v=_<h?Nn(t,a-1):_>h?new ot([],n):p;if(p&&_>h&&u<o&&p.array.length){f=gt(f,n);for(var d=f,b=s;b>S;b-=S){var M=h>>>b&R;d=d.array[M]=gt(d.array[M],n)}d.array[h>>>S&R]=p}if(a<o&&(v=v&&v.removeAfter(n,0,a)),u>=_)u-=_,a-=_,s=S,f=null,v=v&&v.removeBefore(n,0,u);else if(u>i||_<h){for(c=0;f;){var D=u>>>s&R;if(D!==_>>>s&R)break;D&&(c+=(1<<s)*D),s-=S,f=f.array[D]}f&&u>i&&(f=f.removeBefore(n,s,u-c)),f&&_<h&&(f=f.removeAfter(n,s,_-c)),c&&(u-=c,a-=c)}return t.__ownerID?(t.size=a-u,t._origin=u,t._capacity=a,t._level=s,t._root=f,t._tail=v,t.__hash=void 0,t.__altered=!0,t):Bt(u,a,s,f,v)}function Pt(t){return t<W?0:t-1>>>S<<S}var rt=function(t){function r(e){return e==null?Tt():_n(e)?e:Tt().withMutations(function(n){var i=F(e);B(i.size),i.forEach(function(o,u){return n.set(u,o)})})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("OrderedMap {","}")},r.prototype.get=function(n,i){var o=this._map.get(n);return o!==void 0?this._list.get(o)[1]:i},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Tt()},r.prototype.set=function(n,i){return be(this,n,i)},r.prototype.remove=function(n){return be(this,n,l)},r.prototype.__iterate=function(n,i){var o=this;return this._list.__iterate(function(u){return u&&n(u[1],u[0],o)},i)},r.prototype.__iterator=function(n,i){return this._list.fromEntrySeq().__iterator(n,i)},r.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var i=this._map.__ensureOwner(n),o=this._list.__ensureOwner(n);return n?ne(i,o,n,this.__hash):this.size===0?Tt():(this.__ownerID=n,this.__altered=!1,this._map=i,this._list=o,this)},r}(Mt);rt.isOrderedMap=_n;rt.prototype[Et]=!0;rt.prototype[Wt]=rt.prototype.remove;function ne(t,r,e,n){var i=Object.create(rt.prototype);return i.size=t?t.size:0,i._map=t,i._list=r,i.__ownerID=e,i.__hash=n,i.__altered=!1,i}var Ee;function Tt(){return Ee||(Ee=ne(K(),tr()))}function be(t,r,e){var n=t._map,i=t._list,o=n.get(r),u=o!==void 0,a,s;if(e===l){if(!u)return t;i.size>=W&&i.size>=n.size*2?(s=i.filter(function(f,c){return f!==void 0&&o!==c}),a=s.toKeyedSeq().map(function(f){return f[0]}).flip().toMap(),t.__ownerID&&(a.__ownerID=s.__ownerID=t.__ownerID)):(a=n.remove(r),s=o===i.size-1?i.pop():i.set(o,void 0))}else if(u){if(e===i.get(o)[1])return t;a=n,s=i.set(o,[r,e])}else a=n.set(r,i.size),s=i.set(i.size,[r,e]);return t.__ownerID?(t.size=a.size,t._map=a,t._list=s,t.__hash=void 0,t.__altered=!0,t):ne(a,s)}var Bn="@@__IMMUTABLE_STACK__@@";function Tr(t){return Boolean(t&&t[Bn])}var ie=function(t){function r(e){return e==null?Vt():Tr(e)?e:Vt().pushAll(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("Stack [","]")},r.prototype.get=function(n,i){var o=this._head;for(n=ut(this,n);o&&n--;)o=o.next;return o?o.value:i},r.prototype.peek=function(){return this._head&&this._head.value},r.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var i=this.size+arguments.length,o=this._head,u=arguments.length-1;u>=0;u--)o={value:n[u],next:o};return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Rt(i,o)},r.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&Tr(n))return n;B(n.size);var i=this.size,o=this._head;return n.__iterate(function(u){i++,o={value:u,next:o}},!0),this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Rt(i,o)},r.prototype.pop=function(){return this.slice(1)},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Vt()},r.prototype.slice=function(n,i){if(ur(n,i,this.size))return this;var o=Ct(n,this.size),u=ar(i,this.size);if(u!==this.size)return t.prototype.slice.call(this,n,i);for(var a=this.size-o,s=this._head;o--;)s=s.next;return this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):Rt(a,s)},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Rt(this.size,this._head,n,this.__hash):this.size===0?Vt():(this.__ownerID=n,this.__altered=!1,this)},r.prototype.__iterate=function(n,i){var o=this;if(i)return new ct(this.toArray()).__iterate(function(s,f){return n(s,f,o)},i);for(var u=0,a=this._head;a&&n(a.value,u++,this)!==!1;)a=a.next;return u},r.prototype.__iterator=function(n,i){if(i)return new ct(this.toArray()).__iterator(n,i);var o=0,u=this._head;return new y(function(){if(u){var a=u.value;return u=u.next,E(n,o++,a)}return $()})},r}(ht);ie.isStack=Tr;var k=ie.prototype;k[Bn]=!0;k.shift=k.pop;k.unshift=k.push;k.unshiftAll=k.pushAll;k.withMutations=Ft;k.wasAltered=Qr;k.asImmutable=Yt;k["@@transducer/init"]=k.asMutable=Kt;k["@@transducer/step"]=function(t,r){return t.unshift(r)};k["@@transducer/result"]=function(t){return t.asImmutable()};function Rt(t,r,e,n){var i=Object.create(k);return i.size=t,i._head=r,i.__ownerID=e,i.__hash=n,i.__altered=!1,i}var ze;function Vt(){return ze||(ze=Rt(0))}var Pn="@@__IMMUTABLE_SET__@@";function oe(t){return Boolean(t&&t[Pn])}function Un(t){return oe(t)&&Y(t)}function Dn(t,r){if(t===r)return!0;if(!L(r)||t.size!==void 0&&r.size!==void 0&&t.size!==r.size||t.__hash!==void 0&&r.__hash!==void 0&&t.__hash!==r.__hash||O(t)!==O(r)||j(t)!==j(r)||Y(t)!==Y(r))return!1;if(t.size===0&&r.size===0)return!0;var e=!sr(t);if(Y(t)){var n=t.entries();return r.every(function(s,f){var c=n.next().value;return c&&P(c[1],s)&&(e||P(c[0],f))})&&n.next().done}var i=!1;if(t.size===void 0)if(r.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{i=!0;var o=t;t=r,r=o}var u=!0,a=r.__iterate(function(s,f){if(e?!t.has(s):i?!P(s,t.get(f,l)):!P(t.get(f,l),s))return u=!1,!1});return u&&t.size===a}function _t(t,r){var e=function(n){t.prototype[n]=r[n]};return Object.keys(r).forEach(e),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(e),t}function ir(t){if(!t||typeof t!="object")return t;if(!L(t)){if(!at(t))return t;t=U(t)}if(O(t)){var r={};return t.__iterate(function(n,i){r[i]=ir(n)}),r}var e=[];return t.__iterate(function(n){e.push(ir(n))}),e}var pr=function(t){function r(e){return e==null?kt():oe(e)&&!Y(e)?e:kt().withMutations(function(n){var i=t(e);B(i.size),i.forEach(function(o){return n.add(o)})})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.fromKeys=function(n){return this(F(n).keySeq())},r.intersect=function(n){return n=z(n).toArray(),n.length?q.intersect.apply(r(n.pop()),n):kt()},r.union=function(n){return n=z(n).toArray(),n.length?q.union.apply(r(n.pop()),n):kt()},r.prototype.toString=function(){return this.__toString("Set {","}")},r.prototype.has=function(n){return this._map.has(n)},r.prototype.add=function(n){return Qt(this,this._map.set(n,n))},r.prototype.remove=function(n){return Qt(this,this._map.remove(n))},r.prototype.clear=function(){return Qt(this,this._map.clear())},r.prototype.map=function(n,i){var o=this,u=!1,a=Qt(this,this._map.mapEntries(function(s){var f=s[1],c=n.call(i,f,f,o);return c!==f&&(u=!0),[c,c]},i));return u?a:this},r.prototype.union=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return n=n.filter(function(o){return o.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(o){for(var u=0;u<n.length;u++)typeof n[u]=="string"?o.add(n[u]):t(n[u]).forEach(function(a){return o.add(a)})})},r.prototype.intersect=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length===0)return this;n=n.map(function(u){return t(u)});var o=[];return this.forEach(function(u){n.every(function(a){return a.includes(u)})||o.push(u)}),this.withMutations(function(u){o.forEach(function(a){u.remove(a)})})},r.prototype.subtract=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length===0)return this;n=n.map(function(u){return t(u)});var o=[];return this.forEach(function(u){n.some(function(a){return a.includes(u)})&&o.push(u)}),this.withMutations(function(u){o.forEach(function(a){u.remove(a)})})},r.prototype.sort=function(n){return Ut(dt(this,n))},r.prototype.sortBy=function(n,i){return Ut(dt(this,i,n))},r.prototype.wasAltered=function(){return this._map.wasAltered()},r.prototype.__iterate=function(n,i){var o=this;return this._map.__iterate(function(u){return n(u,u,o)},i)},r.prototype.__iterator=function(n,i){return this._map.__iterator(n,i)},r.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var i=this._map.__ensureOwner(n);return n?this.__make(i,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=i,this)},r}(wt);pr.isSet=oe;var q=pr.prototype;q[Pn]=!0;q[Wt]=q.remove;q.merge=q.concat=q.union;q.withMutations=Ft;q.asImmutable=Yt;q["@@transducer/init"]=q.asMutable=Kt;q["@@transducer/step"]=function(t,r){return t.add(r)};q["@@transducer/result"]=function(t){return t.asImmutable()};q.__empty=kt;q.__make=Wn;function Qt(t,r){return t.__ownerID?(t.size=r.size,t._map=r,t):r===t._map?t:r.size===0?t.__empty():t.__make(r)}function Wn(t,r){var e=Object.create(q);return e.size=t?t.size:0,e._map=t,e.__ownerID=r,e}var Ie;function kt(){return Ie||(Ie=Wn(K()))}var vo=function(t){function r(e,n,i){if(!(this instanceof r))return new r(e,n,i);if(Fr(i!==0,"Cannot step a Range by 0"),e=e||0,n===void 0&&(n=1/0),i=i===void 0?1:Math.abs(i),n<e&&(i=-i),this._start=e,this._end=n,this._step=i,this.size=Math.max(0,Math.ceil((n-e)/i-1)+1),this.size===0){if(Sr)return Sr;Sr=this}}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},r.prototype.get=function(n,i){return this.has(n)?this._start+ut(this,n)*this._step:i},r.prototype.includes=function(n){var i=(n-this._start)/this._step;return i>=0&&i<this.size&&i===Math.floor(i)},r.prototype.slice=function(n,i){return ur(n,i,this.size)?this:(n=Ct(n,this.size),i=ar(i,this.size),i<=n?new r(0,0):new r(this.get(n,this._end),this.get(i,this._end),this._step))},r.prototype.indexOf=function(n){var i=n-this._start;if(i%this._step===0){var o=i/this._step;if(o>=0&&o<this.size)return o}return-1},r.prototype.lastIndexOf=function(n){return this.indexOf(n)},r.prototype.__iterate=function(n,i){for(var o=this.size,u=this._step,a=i?this._start+(o-1)*u:this._start,s=0;s!==o&&n(a,i?o-++s:s++,this)!==!1;)a+=i?-u:u;return s},r.prototype.__iterator=function(n,i){var o=this.size,u=this._step,a=i?this._start+(o-1)*u:this._start,s=0;return new y(function(){if(s===o)return $();var f=a;return a+=i?-u:u,E(n,i?o-++s:s++,f)})},r.prototype.equals=function(n){return n instanceof r?this._start===n._start&&this._end===n._end&&this._step===n._step:Dn(this,n)},r}(G),Sr;function Cn(t,r,e){for(var n=En(r),i=0;i!==n.length;)if(t=bn(t,n[i++],l),t===l)return e;return t}function xn(t,r){return Cn(this,t,r)}function lo(t,r){return Cn(t,r,l)!==l}function yo(t){return lo(this,t)}function Fn(){B(this.size);var t={};return this.__iterate(function(r,e){t[e]=r}),t}z.isIterable=L;z.isKeyed=O;z.isIndexed=j;z.isAssociative=sr;z.isOrdered=Y;z.Iterator=y;_t(z,{toArray:function(){B(this.size);var r=new Array(this.size||0),e=O(this),n=0;return this.__iterate(function(i,o){r[n++]=e?[o,i]:i}),r},toIndexedSeq:function(){return new vn(this)},toJS:function(){return ir(this)},toKeyedSeq:function(){return new _r(this,!0)},toMap:function(){return Mt(this.toKeyedSeq())},toObject:Fn,toOrderedMap:function(){return rt(this.toKeyedSeq())},toOrderedSet:function(){return Ut(O(this)?this.valueSeq():this)},toSet:function(){return pr(O(this)?this.valueSeq():this)},toSetSeq:function(){return new dn(this)},toSeq:function(){return j(this)?this.toIndexedSeq():O(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return ie(O(this)?this.valueSeq():this)},toList:function(){return Ht(O(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(r,e){return this.size===0?r+e:r+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return g(this,Yi(this,r))},includes:function(r){return this.some(function(e){return P(e,r)})},entries:function(){return this.__iterator(x)},every:function(r,e){B(this.size);var n=!0;return this.__iterate(function(i,o,u){if(!r.call(e,i,o,u))return n=!1,!1}),n},filter:function(r,e){return g(this,mn(this,r,e,!0))},partition:function(r,e){return Fi(this,r,e)},find:function(r,e,n){var i=this.findEntry(r,e);return i?i[1]:n},forEach:function(r,e){return B(this.size),this.__iterate(e?r.bind(e):r)},join:function(r){B(this.size),r=r!==void 0?""+r:",";var e="",n=!0;return this.__iterate(function(i){n?n=!1:e+=r,e+=i!=null?i.toString():""}),e},keys:function(){return this.__iterator(xt)},map:function(r,e){return g(this,gn(this,r,e))},reduce:function(r,e,n){return Me(this,r,e,n,arguments.length<2,!1)},reduceRight:function(r,e,n){return Me(this,r,e,n,arguments.length<2,!0)},reverse:function(){return g(this,Dr(this,!0))},slice:function(r,e){return g(this,Wr(this,r,e,!0))},some:function(r,e){B(this.size);var n=!1;return this.__iterate(function(i,o,u){if(r.call(e,i,o,u))return n=!0,!1}),n},sort:function(r){return g(this,dt(this,r))},values:function(){return this.__iterator(J)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(r,e){return vt(r?this.toSeq().filter(r,e):this)},countBy:function(r,e){return Ci(this,r,e)},equals:function(r){return Dn(this,r)},entrySeq:function(){var r=this;if(r._cache)return new ct(r._cache);var e=r.toSeq().map(mo).toIndexedSeq();return e.fromEntrySeq=function(){return r.toSeq()},e},filterNot:function(r,e){return this.filter(wr(r),e)},findEntry:function(r,e,n){var i=n;return this.__iterate(function(o,u,a){if(r.call(e,o,u,a))return i=[u,o],!1}),i},findKey:function(r,e){var n=this.findEntry(r,e);return n&&n[0]},findLast:function(r,e,n){return this.toKeyedSeq().reverse().find(r,e,n)},findLastEntry:function(r,e,n){return this.toKeyedSeq().reverse().findEntry(r,e,n)},findLastKey:function(r,e){return this.toKeyedSeq().reverse().findKey(r,e)},first:function(r){return this.find(Ve,null,r)},flatMap:function(r,e){return g(this,Hi(this,r,e))},flatten:function(r){return g(this,wn(this,r,!0))},fromEntrySeq:function(){return new ln(this)},get:function(r,e){return this.find(function(n,i){return P(i,r)},void 0,e)},getIn:xn,groupBy:function(r,e){return xi(this,r,e)},has:function(r){return this.get(r,l)!==l},hasIn:yo,isSubset:function(r){return r=typeof r.includes=="function"?r:z(r),this.every(function(e){return r.includes(e)})},isSuperset:function(r){return r=typeof r.isSubset=="function"?r:z(r),r.isSubset(this)},keyOf:function(r){return this.findKey(function(e){return P(e,r)})},keySeq:function(){return this.toSeq().map(go).toIndexedSeq()},last:function(r){return this.toSeq().reverse().first(r)},lastKeyOf:function(r){return this.toKeyedSeq().reverse().keyOf(r)},max:function(r){return Xt(this,r)},maxBy:function(r,e){return Xt(this,e,r)},min:function(r){return Xt(this,r?Ae(r):Te)},minBy:function(r,e){return Xt(this,e?Ae(e):Te,r)},rest:function(){return this.slice(1)},skip:function(r){return r===0?this:this.slice(Math.max(0,r))},skipLast:function(r){return r===0?this:this.slice(0,-Math.max(0,r))},skipWhile:function(r,e){return g(this,Sn(this,r,e,!0))},skipUntil:function(r,e){return this.skipWhile(wr(r),e)},sortBy:function(r,e){return g(this,dt(this,e,r))},take:function(r){return this.slice(0,Math.max(0,r))},takeLast:function(r){return this.slice(-Math.max(0,r))},takeWhile:function(r,e){return g(this,Ki(this,r,e))},takeUntil:function(r,e){return this.takeWhile(wr(r),e)},update:function(r){return r(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=So(this))}});var T=z.prototype;T[rn]=!0;T[fr]=T.values;T.toJSON=T.toArray;T.__toStringMapper=Lt;T.inspect=T.toSource=function(){return this.toString()};T.chain=T.flatMap;T.contains=T.includes;_t(F,{flip:function(){return g(this,yn(this))},mapEntries:function(r,e){var n=this,i=0;return g(this,this.toSeq().map(function(o,u){return r.call(e,[u,o],i++,n)}).fromEntrySeq())},mapKeys:function(r,e){var n=this;return g(this,this.toSeq().flip().map(function(i,o){return r.call(e,i,o,n)}).flip())}});var Jt=F.prototype;Jt[en]=!0;Jt[fr]=T.entries;Jt.toJSON=Fn;Jt.__toStringMapper=function(t,r){return Lt(r)+": "+Lt(t)};_t(ht,{toKeyedSeq:function(){return new _r(this,!1)},filter:function(r,e){return g(this,mn(this,r,e,!1))},findIndex:function(r,e){var n=this.findEntry(r,e);return n?n[0]:-1},indexOf:function(r){var e=this.keyOf(r);return e===void 0?-1:e},lastIndexOf:function(r){var e=this.lastKeyOf(r);return e===void 0?-1:e},reverse:function(){return g(this,Dr(this,!1))},slice:function(r,e){return g(this,Wr(this,r,e,!1))},splice:function(r,e){var n=arguments.length;if(e=Math.max(e||0,0),n===0||n===2&&!e)return this;r=Ct(r,r<0?this.count():this.size);var i=this.slice(0,r);return g(this,n===1?i:i.concat(Z(arguments,2),this.slice(r+e)))},findLastIndex:function(r,e){var n=this.findLastEntry(r,e);return n?n[0]:-1},first:function(r){return this.get(0,r)},flatten:function(r){return g(this,wn(this,r,!1))},get:function(r,e){return r=ut(this,r),r<0||this.size===1/0||this.size!==void 0&&r>this.size?e:this.find(function(n,i){return i===r},void 0,e)},has:function(r){return r=ut(this,r),r>=0&&(this.size!==void 0?this.size===1/0||r<this.size:this.indexOf(r)!==-1)},interpose:function(r){return g(this,Ji(this,r))},interleave:function(){var r=[this].concat(Z(arguments)),e=Zt(this.toSeq(),G.of,r),n=e.flatten(!0);return e.size&&(n.size=e.size*r.length),g(this,n)},keySeq:function(){return vo(0,this.size)},last:function(r){return this.get(-1,r)},skipWhile:function(r,e){return g(this,Sn(this,r,e,!1))},zip:function(){var r=[this].concat(Z(arguments));return g(this,Zt(this,qe,r))},zipAll:function(){var r=[this].concat(Z(arguments));return g(this,Zt(this,qe,r,!0))},zipWith:function(r){var e=Z(arguments);return e[0]=this,g(this,Zt(this,r,e))}});var At=ht.prototype;At[nn]=!0;At[Et]=!0;_t(wt,{get:function(r,e){return this.has(r)?r:e},includes:function(r){return this.has(r)},keySeq:function(){return this.valueSeq()}});var mt=wt.prototype;mt.has=T.includes;mt.contains=mt.includes;mt.keys=mt.values;_t(st,Jt);_t(G,At);_t(zt,mt);function Me(t,r,e,n,i,o){return B(t.size),t.__iterate(function(u,a,s){i?(i=!1,e=u):e=r.call(n,e,u,a,s)},o),e}function go(t,r){return r}function mo(t,r){return[r,t]}function wr(t){return function(){return!t.apply(this,arguments)}}function Ae(t){return function(){return-t.apply(this,arguments)}}function qe(){return Z(arguments)}function Te(t,r){return t<r?1:t>r?-1:0}function So(t){if(t.size===1/0)return 0;var r=Y(t),e=O(t),n=r?1:0,i=t.__iterate(e?r?function(o,u){n=31*n+Re(N(o),N(u))|0}:function(o,u){n=n+Re(N(o),N(u))|0}:r?function(o){n=31*n+N(o)|0}:function(o){n=n+N(o)|0});return wo(i,n)}function wo(t,r){return r=qt(r,3432918353),r=qt(r<<15|r>>>-15,461845907),r=qt(r<<13|r>>>-13,5),r=(r+3864292196|0)^t,r=qt(r^r>>>16,2246822507),r=qt(r^r>>>13,3266489909),r=hr(r^r>>>16),r}function Re(t,r){return t^r+2654435769+(t<<6)+(t>>2)|0}var Ut=function(t){function r(e){return e==null?Rr():Un(e)?e:Rr().withMutations(function(n){var i=wt(e);B(i.size),i.forEach(function(o){return n.add(o)})})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.fromKeys=function(n){return this(F(n).keySeq())},r.prototype.toString=function(){return this.__toString("OrderedSet {","}")},r}(pr);Ut.isOrderedSet=Un;var pt=Ut.prototype;pt[Et]=!0;pt.zip=At.zip;pt.zipWith=At.zipWith;pt.zipAll=At.zipAll;pt.__empty=Rr;pt.__make=Kn;function Kn(t,r){var e=Object.create(pt);return e.size=t?t.size:0,e._map=t,e.__ownerID=r,e}var ke;function Rr(){return ke||(ke=Kn(Tt()))}function Oo(t){if(Ot(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(V(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var A=function(r,e){var n;Oo(r);var i=function(a){var s=this;if(a instanceof i)return a;if(!(this instanceof i))return new i(a);if(!n){n=!0;var f=Object.keys(r),c=o._indices={};o._name=e,o._keys=f,o._defaultValues=r;for(var h=0;h<f.length;h++){var _=f[h];c[_]=h,o[_]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+ae(this)+' with property "'+_+'" since that property name is part of the Record API.'):Eo(o,_)}}return this.__ownerID=void 0,this._values=Ht().withMutations(function(p){p.setSize(s._keys.length),F(a).forEach(function(v,d){p.set(s._indices[d],v===s._defaultValues[d]?void 0:v)})}),this},o=i.prototype=Object.create(m);return o.constructor=i,e&&(i.displayName=e),i};A.prototype.toString=function(){for(var r=ae(this)+" { ",e=this._keys,n,i=0,o=e.length;i!==o;i++)n=e[i],r+=(i?", ":"")+n+": "+Lt(this.get(n));return r+" }"};A.prototype.equals=function(r){return this===r||Ot(r)&&St(this).equals(St(r))};A.prototype.hashCode=function(){return St(this).hashCode()};A.prototype.has=function(r){return this._indices.hasOwnProperty(r)};A.prototype.get=function(r,e){if(!this.has(r))return e;var n=this._indices[r],i=this._values.get(n);return i===void 0?this._defaultValues[r]:i};A.prototype.set=function(r,e){if(this.has(r)){var n=this._values.set(this._indices[r],e===this._defaultValues[r]?void 0:e);if(n!==this._values&&!this.__ownerID)return ue(this,n)}return this};A.prototype.remove=function(r){return this.set(r)};A.prototype.clear=function(){var r=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:ue(this,r)};A.prototype.wasAltered=function(){return this._values.wasAltered()};A.prototype.toSeq=function(){return St(this)};A.prototype.toJS=function(){return ir(this)};A.prototype.entries=function(){return this.__iterator(x)};A.prototype.__iterator=function(r,e){return St(this).__iterator(r,e)};A.prototype.__iterate=function(r,e){return St(this).__iterate(r,e)};A.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var e=this._values.__ensureOwner(r);return r?ue(this,e,r):(this.__ownerID=r,this._values=e,this)};A.isRecord=Ot;A.getDescriptiveName=ae;var m=A.prototype;m[un]=!0;m[Wt]=m.remove;m.deleteIn=m.removeIn=Yr;m.getIn=xn;m.hasIn=T.hasIn;m.merge=Mn;m.mergeWith=An;m.mergeIn=Zr;m.mergeDeep=Tn;m.mergeDeepWith=Rn;m.mergeDeepIn=Vr;m.setIn=Kr;m.update=Hr;m.updateIn=Jr;m.withMutations=Ft;m.asMutable=Kt;m.asImmutable=Yt;m[fr]=m.entries;m.toJSON=m.toObject=T.toObject;m.inspect=m.toSource=function(){return this.toString()};function ue(t,r,e){var n=Object.create(Object.getPrototypeOf(t));return n._values=r,n.__ownerID=e,n}function ae(t){return t.constructor.displayName||t.constructor.name||"Record"}function St(t){return Br(t._keys.map(function(r){return[r,t.get(r)]}))}function Eo(t,r){try{Object.defineProperty(t,r,{get:function(){return this.get(r)},set:function(e){Fr(this.__ownerID,"Cannot set on an immutable record."),this.set(r,e)}})}catch{}}function bo(){return Ze("ws/student"+location.search,{})}function zo(){const t=new URL(location),r=t.pathname.substring(8);if(console.log(r),r==="speaker")return X(Io,{id:t.searchParams.get("id"),language:t.searchParams.get("language"),prompt:t.searchParams.get("prompt")});if(r==="listener"){const e=bo();return Or(ti,{shadows:!0,camera:{position:[0,0,8],fov:42},children:[X("color",{attach:"background",args:["#ececec"]}),X(ri,{subject:e})]})}}function Io({id:t,language:r,prompt:e}){const[n,i]=Gt.useState(!1),[o,u]=Gt.useState(Ht()),[a,s]=Gt.useState("");return Gt.useEffect(()=>{if(n){const f=Ii();return f.subscribe({next(h){const _=JSON.parse(h.data);_.type==="original"&&(_.isFinal?(u(p=>p.push(_.content)),s("")):s(_.content))}}),mi(Ai()).pipe(Xe(h=>h)).subscribe(h=>f.next(new Blob([h]))),()=>{recorder$.complete(),recorder$.unsubscribe(),f.unsubscribe()}}},[n]),Or("div",{children:[Or("button",{onClick:()=>i(!n),children:[n?"Stop":"Start"," Recording"]}),X("h2",{children:"History"}),X("div",{id:"history",style:{overflowY:"scroll",maxHeight:"300px"},children:o.map((f,c)=>X("p",{children:f},c))}),X("h2",{children:"Latest"}),X("div",{id:"partial",children:a})]})}ei.createRoot(document.getElementById("root")).render(X(ni.StrictMode,{children:X(zo,{})}));
